# Enable Rewrite Engine
RewriteEngine On

# Ignore Existing Files & Folders
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite Nested Folders (Unlimited Levels ðŸ”¥)
RewriteRule ^(.+)$ app/page/$1.php [L,QSA]

# Allow Folder URLs Without Trailing Slash
RewriteRule ^(.+)/$ app/page/$1.php [L,QSA]

# Remove .php Extension Automatically
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L,QSA]

# Block Direct Access to Layout Files
RewriteCond %{REQUEST_URI} ^/app/layout/.*$
RewriteRule ^.*$ - [F,L]

# Prevent Direct Access to Sensitive Files
<FilesMatch "\.(env|git|htpasswd|ini|log|bak)$">
    Require all denied
</FilesMatch>

# Prevent Access to .htaccess
<Files .htaccess>
    Require all denied
</Files>

# Custom 404 Page
ErrorDocument 404 /app/page/404.php

# Set Default Index Page
DirectoryIndex app/page/index.php

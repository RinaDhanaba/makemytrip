# Enable Rewrite Engine
RewriteEngine On
RewriteBase /

# Block direct access to layout folder
RewriteRule ^app/layout/ - [F,L]

# Prevent rewriting if URL is already pointing to app/page
RewriteCond %{REQUEST_URI} !^/app/page/

# If the requested file or folder doesn't exist in DocumentRoot
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite every request to app/page/<requested>.php (trailing slash optional)
RewriteRule ^(.*)/?$ app/page/$1.php [L,QSA]

# Custom 404 Page
ErrorDocument 404 /app/page/404.php

# Default Index Page
DirectoryIndex app/page/index.php
